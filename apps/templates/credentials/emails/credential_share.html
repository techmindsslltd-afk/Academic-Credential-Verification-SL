{% extends "accounts/emails/base_email.html" %}
{% load static %}

{% block title %}Credential Shared - {{ settings.site_name|default:"CertChain" }}{% endblock %}

{% block header %}
{% if settings.file %}
<img src="{% if request and request.is_secure %}https{% else %}http{% endif %}://{% if request %}{{ request.get_host }}{% else %}certchain.io{% endif %}{{ settings.file.url }}" alt="{{ settings.site_name|default:'CertChain' }}" style="max-height: 50px; margin-bottom: 10px;">
{% else %}
<img src="{% if request and request.is_secure %}https{% else %}http{% endif %}://{% if request %}{{ request.get_host }}{% else %}certchain.io{% endif %}{% static 'assets/guest/images/logo.jpeg' %}" alt="{{ settings.site_name|default:'CertChain' }}" style="max-height: 50px; margin-bottom: 10px;">
{% endif %}
<br>
{{ settings.site_name|default:"CertChain" }} - Credential Shared
{% endblock %}

{% block content %}
<table width="100%" cellpadding="0" cellspacing="0" style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;">
    
    <!-- Greeting -->
    <tr style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;">
        <td class="content-block" style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 16px; vertical-align: top; margin: 0; padding: 0 0 20px; color: #333;" valign="top">
            <p style="margin: 0 0 15px 0; font-size: 16px; line-height: 1.5;">
                Hello,
            </p>
            <p style="margin: 0 0 15px 0; font-size: 14px; line-height: 1.6; color: #666;">
                <strong>{{ holder_name }}</strong> has shared a credential with you through {{ settings.site_name|default:"CertChain" }}.
            </p>
        </td>
    </tr>
    
    <!-- Credential Details -->
    <tr style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;">
        <td class="content-block" style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0; padding: 0 0 20px;" valign="top">
            <div style="background-color: #f8f9fa; border-left: 4px solid #667eea; padding: 20px; margin: 20px 0; border-radius: 4px;">
                <h4 style="margin: 0 0 15px 0; color: #333; font-size: 16px;">Credential Details:</h4>
                <table width="100%" cellpadding="0" cellspacing="0" style="font-size: 14px;">
                    <tr>
                        <td style="padding: 5px 0; color: #666;"><strong>Institution:</strong></td>
                        <td style="padding: 5px 0; color: #333;">{{ institution_name }}</td>
                    </tr>
                    <tr>
                        <td style="padding: 5px 0; color: #666;"><strong>Program:</strong></td>
                        <td style="padding: 5px 0; color: #333;">{{ program_name }}</td>
                    </tr>
                    {% if credential.credential_id %}
                    <tr>
                        <td style="padding: 5px 0; color: #666;"><strong>Credential ID:</strong></td>
                        <td style="padding: 5px 0; color: #333; font-family: monospace;">{{ credential.credential_id }}</td>
                    </tr>
                    {% endif %}
                    {% if credential.issue_date %}
                    <tr>
                        <td style="padding: 5px 0; color: #666;"><strong>Issue Date:</strong></td>
                        <td style="padding: 5px 0; color: #333;">{{ credential.issue_date|date:"F d, Y" }}</td>
                    </tr>
                    {% endif %}
                    {% if not share.hide_grade and credential.grade %}
                    <tr>
                        <td style="padding: 5px 0; color: #666;"><strong>Grade:</strong></td>
                        <td style="padding: 5px 0; color: #333;">{{ credential.grade }}</td>
                    </tr>
                    {% endif %}
                </table>
            </div>
        </td>
    </tr>
    
    <!-- Share Link -->
    <tr style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;">
        <td class="content-block" style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0; padding: 0 0 20px;" valign="top">
            <div style="text-align: center; margin: 30px 0;">
                <a href="{{ share_url }}" style="display: inline-block; padding: 15px 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #ffffff; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 16px;">
                    View Credential
                </a>
            </div>
            <p style="text-align: center; margin: 15px 0 0 0; font-size: 12px; color: #999;">
                Or copy this link: <br>
                <code style="word-break: break-all; font-size: 11px; color: #667eea;">{{ share_url }}</code>
            </p>
        </td>
    </tr>
    
    <!-- Expiration Notice -->
    {% if share.expires_at %}
    <tr style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;">
        <td class="content-block" style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0; padding: 0 0 20px;" valign="top">
            <div style="background-color: #fff3cd; border: 1px solid #ffc107; padding: 15px; border-radius: 4px; margin: 20px 0;">
                <p style="margin: 0; font-size: 13px; color: #856404;">
                    <strong>‚è∞ Note:</strong> This share link will expire on <strong>{{ share.expires_at|date:"F d, Y \a\t h:i A" }}</strong>.
                </p>
            </div>
        </td>
    </tr>
    {% endif %}
    
    <!-- Privacy Notice -->
    {% if share.hide_grade or share.hide_student_id %}
    <tr style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;">
        <td class="content-block" style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0; padding: 0 0 20px;" valign="top">
            <p style="margin: 0; font-size: 12px; color: #999; font-style: italic;">
                Some information has been hidden for privacy purposes.
            </p>
        </td>
    </tr>
    {% endif %}
    
    <!-- Security Notice -->
    <tr style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;">
        <td class="content-block" style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0; padding: 0 0 20px;" valign="top">
            <div style="border-top: 1px solid #e9e9e9; padding-top: 20px; margin-top: 20px;">
                <p style="margin: 0 0 10px 0; font-size: 12px; color: #999;">
                    <strong>Security Notice:</strong> This credential has been shared with you by {{ holder_name }}. 
                    Please verify the authenticity of this credential through the link above.
                </p>
            </div>
        </td>
    </tr>
    
    <!-- Closing -->
    <tr style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;">
        <td class="content-block" style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0; padding: 0 0 20px;" valign="top">
            <p style="margin: 0 0 10px 0; font-size: 14px; line-height: 1.6; color: #333;">
                Best regards,<br>
                <strong>{{ settings.site_name|default:"CertChain" }} Team</strong>
            </p>
            <p style="margin: 0; font-size: 12px; color: #999;">
                This is an automated email. Please do not reply directly to this message.
            </p>
        </td>
    </tr>
</table>
{% endblock %}

